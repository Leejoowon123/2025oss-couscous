# System Report: AI 세율 정책 시뮬레이션 시스템 분석 보고서

## 1. 시스템 개요

본 시스템은 **AI 세율 정책**이 경제에 미치는 효과를 분석하고, 최적 AI 세율을 산출하기 위한 시뮬레이션 도구입니다. 주요 기능은 다음과 같습니다.

- **최적 AI 세율 산출**:  
  - GDP와 상관관계가 높은 변수들을 추출하고, 이들 변수의 조합을 통해 Proxy 후보를 생성합니다.  
  - 다항 회귀와 BIC 기준 최적 모델 선택 후, Laffer Curve 모델에 대한 비선형 회귀 및 글로벌 최적화 (Differential Evolution)를 통해 최적 AI 세율을 산출합니다.

- **거시경제 시뮬레이션**:  
  VARMAX 모델을 사용하여 외생 변수(최적 세율)를 포함한 시계열 예측을 수행하고, 미래 5년간의 경제 지표(GDP, GERD, Unemployment Rate 등)를 예측합니다.

- **시각화 및 사용자 인터페이스**:  
  Streamlit과 Plotly를 활용하여 사용자 입력에 따른 예측 결과 및 실제 데이터를 시각화하고, 표 형태로 예측 결과와 연간 변화량을 제공합니다.

---

## 2. 모듈별 상세 분석

### 2.1 System_logic.py

#### 2.1.1 Laffer Curve 함수: `laffer_curve(x, a, b, c)`
- **기능**:  
$a \cdot x^2 + b \cdot x + c $ 
형태의 2차 함수로 Laffer Curve를 정의합니다.
- **역할**:  
  - 비선형 회귀와 최적화 단계에서 GDP와 Proxy 변수 간의 관계를 모델링합니다.

#### 2.1.2 상관관계 변수 선택: `get_high_corr_vars(country_df, threshold=0.45)`
- **기능**:  
  - 국가 데이터에서 GDP와 상관관계가 높은(절대값 기준 0.45 초과) 수치형 변수들을 선택합니다.
- **목적**:  
  - Proxy 후보 생성을 위한 유의한 변수들을 추출합니다.

#### 2.1.3 Proxy 후보 생성: `find_best_proxy(country_df, high_corr_vars)`
- **기능**:  
  - 상관관계가 높은 변수들의 2~3개 조합을 통해 새로운 Proxy 변수(대리 변수)를 생성합니다.
- **처리 과정**:  
  - MinMaxScaler를 사용하여 각 변수의 값을 \( [0, 0.5] \) 범위로 정규화한 후 평균을 계산하여 Proxy 후보 열을 생성합니다.
- **출력**:  
  - Proxy 후보들의 이름 리스트와 업데이트된 데이터프레임을 반환합니다.

#### 2.1.4 최적 모델 선택: `find_best_model(country_df, proxy_candidates)`
- **기능**:  
  - Proxy 후보 변수들을 대상으로 다항 회귀(차수 2부터 6까지)를 적용하고, Bayesian Information Criterion (BIC)를 계산하여 최적의 Proxy 변수와 다항 차수를 선택합니다.
- **목적**:  
  - 최적 모델을 선택하여, 과적합을 방지하고 설명력이 높은 Proxy를 산출합니다.

#### 2.1.5 최적 AI 세율 산출: `get_optimal_ai_tax(country_df)`
- **기능**:  
  - 상관관계 변수 추출, Proxy 후보 생성, 최적 모델 선택, 그리고 Laffer Curve 모델 피팅을 종합하여 최적 AI 세율을 도출합니다.
- **처리 과정**:  
  1. 상관관계가 높은 변수들을 추출  
  2. Proxy 후보 생성 후 최적 모델 선택  
  3. 선택된 Proxy 변수에 대해 `curve_fit`을 사용하여 Laffer Curve 파라미터 추정  
  4. Differential Evolution을 이용해 최적 AI 세율 (범위: 0 ~ 0.4) 도출
- **예외 처리**:  
  - 최적 Proxy 후보를 찾지 못하거나 파라미터 추정 중 오류 발생 시 기본값 적용

#### 2.1.6 거시경제 시뮬레이션: `macroeconomic_simulation(...)`
- **기능**:  
  - VARMAX 모델을 사용하여 선택된 국가의 경제 지표(GDP, GERD, Unemployment Rate)를 대상으로 미래 5년간의 예측을 수행합니다.
- **처리 과정**:  
  - 필요한 변수들이 충분한지 확인 후 모델 데이터를 구성  
  - exogenous 변수로 최적 세율을 사용하여 모델 학습  
  - 사용자 입력(적용 세율)과 최적 세율을 각각 반영하여 예측 진행
- **출력**:  
  - 예측 결과에 연도 정보를 추가하여 반환

#### 2.1.7 변화량 계산: `compute_changes(forecast_df, actual_values)`
- **기능**:  
  - 예측 결과와 실제 값 간의 연간 변화량(차분)을 계산합니다.
- **처리 과정**:  
  - 첫 해는 실제 값과 예측값 차이를 사용하고, 이후 해는 연속 차분을 적용


## 3. 현재 시스템 평가 및 추가 제언

### 3.1 현재 시스템 평가

**강점**
- **통합 분석 파이프라인**:  
  데이터 로드부터 최적 세율 산출, 거시경제 예측까지의 전체 분석 과정을 하나의 시스템에서 수행합니다.
- **다양한 기법의 결합**:  
  - Proxy 후보 생성과 다항 회귀 모델 선택을 통한 최적 세율 도출  
  - Laffer Curve 모델 피팅과 글로벌 최적화 알고리즘 활용  
  - VARMAX 모델을 통한 외생 변수 포함 시계열 예측
- **실시간 인터페이스 제공**:  
  Streamlit과 Plotly를 통해 사용자 입력에 따른 즉각적인 결과 시각화 및 비교 분석을 지원합니다.
- **유연한 사용자 입력**:  
  슬라이더를 통한 AI 세율 조정 기능으로 다양한 시나리오 분석이 가능합니다.

**약점**
- **성능 최적화**:  
    대용량 데이터 또는 복잡한 모델 학습 시 실행 시간이 길어질 가능성이 있어 성능 개선이 요구됨.

- **AI 세율**:
    - 현재 존재하지 않는 AI 세율을 넣었지만 AI 세율이 도입된 후 실제 데이터를 기반으로 진행하여 개선이 요구됨
    - 2013 ~ 2022년의 데이터를 기반으로 최신화가 필요함함

## 4. 결론

제공된 시스템은 AI 세율 정책의 경제적 영향을 분석하기 위한 통합 도구입니다. 
 
- **데이터 로드부터 최적 세율 산출, 시계열 예측**까지의 전체 파이프라인을 효과적으로 구현하고 있습니다.
- 다양한 분석 기법과 시각화 도구를 결합하여, 사용자가 정책 효과를 쉽게 이해할 수 있도록 설계하였습니다.
