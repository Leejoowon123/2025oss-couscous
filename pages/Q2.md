# 논문 보고서: Q2 – AI 세율의 최적 수준 설정 연구

## 1. 연구 개요

본 연구는 "AI 세율의 최적 수준은 어떻게 설정할 것인가?"라는 질문에 답하기 위해, 다양한 경제 지표와 GDP 간의 비선형 관계를 분석하는 방법론을 제시합니다.  
특히, 본 연구에서는 **라퍼 곡선 (Laffer Curve)** 모형을 사용하여 세율(0.0% ~ 50.0%) 범위 내에서 GDP를 최대화하는 최적 세율을 도출합니다.
두 가지 접근법을 사용합니다.

1. **단일 변수 접근**:  
   - Country, year, GDP를 제외한 모든 개별 변수를 세율 대리 변수로 간주하고, 각 변수와 GDP 간의 라퍼 곡선을 피팅합니다.  
   - Differential Evolution, Dual Annealing, SHGO 등 다양한 최적화 알고리즘을 통해 최적 세율을 도출합니다.

2. **복합 변수 접근**:  
   - 2~3개 변수를 조합하여 단일 복합 변수를 생성한 후, 이 복합 변수와 GDP 간의 라퍼 곡선을 피팅합니다.  
   - 복합 변수 접근 결과 중 결정계수(R²)가 0.8 이상인 결과만을 선별하여, 경제 지표와의 설명력이 높은 조합을 최종 후보로 제시합니다.

또한, 계산 시간이 오래 걸리는 단일 변수와 복합 변수 결과를 CSV 파일에 캐싱하여, 동일한 데이터가 이미 존재할 경우 이를 재사용함으로써 재현성을 높이고 실행 시간을 단축하였습니다.

## 2. 코드 구성

### 2.1 Q2_logic.py

Q2_logic.py 파일은 다음과 같은 주요 기능들로 구성되어 있습니다.

1. **라퍼 곡선 함수 정의**  
   - `laffer_curve(x, a, b, c)`: GDP를 2차 함수 형태로 모델링하는 라퍼 곡선을 정의합니다.

2. **단일 변수 접근 (Single Variable Approach)**  
   - `fit_laffer_curve_single(df, var, gdp_col="GDP")`: 입력 데이터에서 지정된 변수와 GDP 간의 라퍼 곡선을 피팅하여 결정계수(R²)와 최적 파라미터를 도출합니다.
   - `optimize_tax_multiple_algorithms(popt, x_bound=(0.0, 5.0))`: 여러 최적화 알고리즘(차분 최적화, Dual Annealing, SHGO)을 통해 도출된 라퍼 곡선 최대점을 계산하여 최적 세율과 해당 시점의 GDP 예측값을 반환합니다.

3. **복합 변수 접근 (Combination Variable Approach)**  
   - `combine_variables(df, vars_to_combine)`: 지정된 변수들의 단순 평균을 계산하여 복합 변수를 생성합니다.
   - `build_combinations_of_variables(df, candidate_vars, max_comb=3, r2_filter=0.8)`: 후보 변수들 중 2~3개 조합을 생성하고, 복합 변수에 대해 라퍼 곡선을 피팅한 후 결정계수(R²)가 0.8 이상인 결과만 필터링합니다.  
     - 결과는 CSV 파일("data/combo_results.csv")에 저장되며, CSV 파일이 존재하면 이를 불러와 바로 사용합니다.

4. **정책적 변수 선별**  
   - `filter_variables_by_policy_and_r2(df, var_list, r2_threshold=0.3)`: 변수명에 'tax', 'revenue', 'unemployment' 등의 키워드가 포함되고, 결정계수(R²)가 0.3 이상인 변수를 선별합니다.

5. **전체 분석 결과 통합**  
   - `analyze_single_variables(df, exclude_cols=...)` 및 `analyze_all(df)`: 단일 변수 접근과 복합 변수 접근 결과를 모두 도출하여 반환합니다.

### 2.2 Q2.py

Q2.py 파일은 Streamlit 인터페이스를 통해 연구 결과를 시각화합니다.

- **단계별 결과 출력**  
  1. **단일 변수 접근 결과**:  
     - CSV 파일("data/single_results.csv")이 존재하면 이를 읽어 DataFrame으로 출력합니다.
     - CSV가 없을 경우 `analyze_single_variables(df)` 함수를 호출하여 계산하고, CSV에 저장한 후 출력합니다.
  2. **정책적 타당성과 결정계수(R²) 기준 변수 선별**:  
     - 후보 변수 중 정책적으로 타당한 변수를 선별하여 출력합니다.
  3. **복합 변수 접근 결과 (결정계수 R² >= 0.8)**:  
     - CSV 파일("data/combo_results.csv")에 저장된 복합 변수 결과를 읽어 DataFrame으로 출력합니다.
     - CSV가 없을 경우 복합 변수 접근 결과를 계산하고, 결과 중 R² 0.8 이상인 결과만 필터링하여 저장 및 출력합니다.
- **적용 방안 및 정책적 시사점**  
  - 단일 및 복합 변수 접근 결과를 토대로 정부가 경제 성장 및 기업 투자 촉진을 위해 활용할 수 있는 AI 세율 대리 변수 선정 기준 및 최적 세율 도출 방법을 설명합니다.

## 3. 결론 및 향후 연구 방향

- **최적 세율 도출**:  
  - 단일 변수와 복합 변수 접근을 통해 도출된 최적 세율은 각각 GDP 최대화 지점을 나타내며, 정책적 타당성과 결정계수(R²)를 기준으로 신뢰할 만한 후보를 선정할 수 있습니다.
  - 특히, 복합 변수 접근의 경우 R² 0.8 이상인 결과만을 선별함으로써, 경제 지표와의 설명력이 매우 높은 변수 조합을 정책 적용 후보로 활용할 수 있습니다.

- **CSV 캐싱의 활용**:  
  - 계산 시간이 오래 걸리는 결과를 CSV 파일에 저장하여 재사용함으로써, 재현성을 높이고 실행 시간을 단축할 수 있습니다.

- **추가 연구 필요성**:  
  - 민감도 분석, 외부 변수 추가, 다양한 경제 시나리오 적용 등을 통해 도출된 최적 세율의 안정성과 정책적 타당성을 더욱 보완할 필요가 있습니다.
  - 최적화 알고리즘 간 결과 차이를 분석하여, 최적 세율 도출의 신뢰도를 높이는 추가 연구가 요구됩니다.

## 4. 참고: Q2 코드 개요

- **Q2_logic.py**:  
  - 라퍼 곡선 피팅, 최적화 알고리즘 적용, 단일 변수 및 복합 변수 접근 기능을 구현합니다.  
  - CSV 캐싱을 통해 계산 결과를 저장 및 재사용하며, JSON 문자열 처리를 통해 복합 자료형 데이터의 저장 및 로드를 원활하게 합니다.

- **Q2.py**:  
  - Streamlit 인터페이스를 통해 Q2_logic.py에서 도출된 결과를 시각화합니다.  
  - 단일 변수 접근, 정책적 변수 선별, 복합 변수 접근 결과를 각각 표로 출력하고, 연구 적용 방안 및 정책적 시사점을 제시합니다.